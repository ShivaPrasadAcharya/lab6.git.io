<!DOCTYPE html>
<html>

<head>
  <title>Dynamic Page Example</title>
  <style>
    /* Style for the toggle buttons */
    button {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 8px 16px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    /* Style for the active (toggled) buttons */
    button.active {
      background-color: #28a745;
    }

    textarea {
      width: 80%;
      max-width: 100%;
      /* Ensure it doesn't exceed the viewport width */
      box-sizing: border-box;
      /* Include padding and border in the width calculation */
    }

    #input1 {
      width: 20%;
      box-sizing: border-box;
      /* Include padding and border in the width calculation */
    }


    /* Add CSS for green and red backgrounds based on the match */
    .match {
      background-color: #28a745;
      /* Green */
    }

    .no-match {
      background-color: #dc3545;
      /* Red */
    }

      /* New style for the output */
  /* New style for the output */
  .jkl-details {
    display: none;/*this stop the detail content from displaying atutomatically.remove it if needed*/
    font-size: small;
    font-style: italic;
    /* Add other styles as needed */
  }

  .details-content {
    font-size: small;
    font-style: italic;
    /* Add other styles as needed */
  }
  </style>

</head>

<body>
  <h1>Dynamic Page Example</h1>
  <label for="input0">Parking1:</label>
  <textarea id="input0" placeholder="Enter text for Input 0:heading"></textarea><br>
  <label for="input00">Parking2:</label>
  <textarea id="input00" placeholder="Enter text for Input 00:heading"></textarea><br>
  <button id="saveStateButton" onclick="savePageState()">Save State</button>
  <button id="loadStateButton" onclick="loadPageState()">Load State</button><br><br>
 
  <label for="input1">Input 1:</label>
  <textarea id="input1" oninput="autoPopulateInputs()" placeholder="Enter text for Input 1:ID"></textarea><br>

  <label for="input2">Input 2:</label>
  <textarea id="input2" placeholder="Enter text for Input 2:heading"></textarea><br>

  <label for="input3">Input 3:</label>
  <textarea id="input3" placeholder="Enter text for Input 3:content"></textarea><br>

  <label for="input4">Input 4:</label>
  <textarea id="input4" placeholder="Enter text for Input 4:fn1"></textarea><br>


  <label for="input5">Input 5:</label>
  <textarea id="input5" placeholder="Enter text for Input 5:fn2"></textarea><br>

  <label for="input6">Input 6:</label>
  <textarea id="input6" placeholder="Enter text for Input 6:fn3"></textarea><br>

  <label for="input7">Input 7:</label>
  <textarea id="input7" placeholder="Enter text for Input 7:title"></textarea><br>

  <label for="input8">Input 8:</label>
  <textarea id="input8" placeholder="Enter text for Input 8:link"></textarea><br>

  <label for="input9">Input 9:</label>
  <textarea id="input9" placeholder="Enter text for Input 9:accessed on:"></textarea><br>

  <label for="input10">Input 10:</label>
  <textarea id="input10" placeholder="Enter text for Input 10:Keywords"></textarea><br>

  <button id="showButton" onclick="toggleABC()">Show ABC</button>

  <p id="output" style="display: none;"></p>
  <!-- Add the Show All JKL button -->
  <button id="showAllJKLButton" onclick="toggleAllJKL()">Show All JKL</button>
  <!-- Add the Show LMN button -->
  <button id="showLMNButton" onclick="toggleLMN()">Show LMN</button>

  <!--content of jkl is visible here-->
  <div id="jklContainer"></div>

  <!--content of lmn is visible here-->

  <div id="lmnContent" style="display: none;">
    <p id="lmnOutput"></p>
    <div id="lmnDetails" style="display: none;">
      <!-- Detailed content will be added here -->
    </div>
  </div>



  </div>

  <script>
    var valuesArray = [
      { input1: "123", input2: "value12", input3: "value13", input4: "value14", input5: "value15&#x003C;b&#x003E;this is bold&#x003C;/b&#x003E;value1515&#x003C;br&#x003E;ok", input6: "value16", input7: "value17", input8: "value18", input9: "value19", input10: "value0" },

      { input1: "456", input2: "value22", input3: "value23", input4: "value24", input5: "value25", input6: "value26", input7: "value27", input8: "https://www.onlinekhabar.com/2023/08/1351895", input9: "value29", input10: "value0" },
      { "input1": "789", "input2": "a", "input3": "b", "input4": "", "input5": "", "input6": "", "input7": "", "input8": "", "input9": "", "input10": "" }
      // Add more values as needed
    ];
    var mainTextVisible = false;
    var lmnContentVisible = false;
    var lmnDetailsVisible = false;

    //autopopulating the input fields
    function autoPopulateInputs() {
      var input1Value = document.getElementById("input1").value;
      var matchingValue = valuesArray.find(function (item) {
        return item.input1 === input1Value;
      });

      var input1Field = document.getElementById("input1");

      if (matchingValue) {
        input1Field.value = matchingValue.input1;
        input1Field.classList.remove("no-match");
        input1Field.classList.add("match");
        // Rest of your code to populate other fields...
      } else {
        input1Field.value = input1Value;
        input1Field.classList.remove("match");
        input1Field.classList.add("no-match");
      }
      if (matchingValue) {
        document.getElementById("input2").value = matchingValue.input2;
        document.getElementById("input3").value = matchingValue.input3.replace(/</g, "&#x003C;").replace(/>/g, "&#x003E;");
        document.getElementById("input4").value = matchingValue.input4.replace(/</g, "&#x003C;").replace(/>/g, "&#x003E;");
        document.getElementById("input5").value = matchingValue.input5.replace(/</g, "&#x003C;").replace(/>/g, "&#x003E;");
        document.getElementById("input6").value = matchingValue.input6.replace(/</g, "&#x003C;").replace(/>/g, "&#x003E;");
        document.getElementById("input7").value = matchingValue.input7;
        document.getElementById("input8").value = matchingValue.input8;
        document.getElementById("input9").value = matchingValue.input9;
        document.getElementById("input10").value = matchingValue.input10
      } else {
        document.getElementById("input2").value = "";
        document.getElementById("input3").value = "";
        document.getElementById("input4").value = "";
        document.getElementById("input5").value = "";
        document.getElementById("input6").value = "";
        document.getElementById("input7").value = "";
        document.getElementById("input8").value = "";
        document.getElementById("input9").value = "";
        document.getElementById("input10").value = "";

      }
    }

    var showAllJKLButton = document.getElementById("showAllJKLButton");
    var jklContainer = document.getElementById("jklContainer");

    // Toggle the visibility of all JKL content
    function toggleAllJKL() {
      if (jklContainer.innerHTML === '') {
        // Generate JKL content if it's empty
        for (var i = 0; i < valuesArray.length; i++) {
          var input1Value = valuesArray[i].input1;
          var input2Value = valuesArray[i].input2;
          var input3Value = valuesArray[i].input3;
          var input4Value = valuesArray[i].input4;
          var input5Value = valuesArray[i].input5.replace(/&#x003C;/g, "<").replace(/&#x003E;/g, ">");
          var input6Value = valuesArray[i].input6;
          var input7Value = valuesArray[i].input7;
          var input8Value = valuesArray[i].input8;
          var input9Value = valuesArray[i].input9;
          var input10Value = valuesArray[i].input10;

          var jklContentText = '<b><u>' + input1Value + ': ' + input2Value + '</b></u>' + input3Value + ' + ';
jklContentText += '<a href="javascript:void(0)" onclick="toggleJKLDetails(event, ' + i + ')">[' + (i + 1) + ']</a>';
jklContentText += '<div id="jklDetails_' + i + '" class="jkl-details">' + input1Value + ":" + input4Value + input5Value + input6Value + input7Value + '<a href="' + input8Value + '">' + input8Value + '</a>' + input9Value + '</div>';





          var jklContent = document.createElement("div");
          jklContent.innerHTML = jklContentText;
          jklContainer.appendChild(jklContent);
        }

        showAllJKLButton.textContent = "Hide All JKL"; // Update button text
        showAllJKLButton.classList.add("active"); // Add "active" class
      } else {
        // Clear JKL content if it's not empty
        jklContainer.innerHTML = '';
        showAllJKLButton.textContent = "Show All JKL"; // Update button text
        showAllJKLButton.classList.remove("active"); // Remove "active" class
      }
    }

    // Toggle the visibility of JKL details
    function toggleJKLDetails(index) {
      var detailsDiv = document.getElementById('jklDetails_' + index);

      if (detailsDiv.style.display === 'none') {
        detailsDiv.style.display = 'block';
      } else {
        detailsDiv.style.display = 'none';
      }
    }

    // Toggle the visibility of LMN content
    function toggleLMN() {
      var lmnContent = document.getElementById("lmnContent");
      var showLMNButton = document.getElementById("showLMNButton");

      lmnContentVisible = !lmnContentVisible;

      if (lmnContentVisible) {
        var input1Value = document.getElementById("input1").value;
        var input2Value = document.getElementById("input2").value.replace(/&#x003C;/g, "<").replace(/&#x003E;/g, ">");
        var input3Value = document.getElementById("input3").value.replace(/&#x003C;/g, "<").replace(/&#x003E;/g, ">");
        var input4Value = document.getElementById("input4").value;
        var input5Value = document.getElementById("input5").value;
        var input6Value = document.getElementById("input6").value;
        var input7Value = document.getElementById("input7").value;
        var input8Value = document.getElementById("input8").value;
        var input9Value = document.getElementById("input9").value;
        var input10Value = document.getElementById("input10").value;

        var lmnContentText = '<b><u>' + input1Value + ': ' + input2Value + '</b></u>' + input3Value + ' + ';
        lmnContentText += '<a href="javascript:void(0)" onclick="toggleDetails()">[Details]</a>';

        document.getElementById("lmnOutput").innerHTML = lmnContentText;

        lmnContent.style.display = "block";
        showLMNButton.textContent = "Hide LMN";
        showLMNButton.classList.add("active"); // Add "active" class
      } else {
        lmnContent.style.display = "none";
        showLMNButton.textContent = "Show LMN";
        hideDetails();
        showLMNButton.classList.remove("active"); // Remove "active" class
        hideDetails(); // Also call hideDetails when hiding LMN
      }
    }

    // Toggle the visibility of LMN details
    function toggleDetails() {
      var lmnDetails = document.getElementById("lmnDetails");

      lmnDetailsVisible = !lmnDetailsVisible;

      if (lmnDetailsVisible) {
        var input1Value = document.getElementById("input1").value;
        var input2Value = document.getElementById("input2").value;
        var input3Value = document.getElementById("input3").value;
        var input4Value = document.getElementById("input4").value.replace(/&#x003C;/g, "<").replace(/&#x003E;/g, ">");
        var input5Value = document.getElementById("input5").value.replace(/&#x003C;/g, "<").replace(/&#x003E;/g, ">");
        var input6Value = document.getElementById("input6").value.replace(/&#x003C;/g, "<").replace(/&#x003E;/g, ">");
        var input7Value = document.getElementById("input7").value;
        var input8Value = document.getElementById("input8").value;
        var input9Value = document.getElementById("input9").value;
        var input10Value = document.getElementById("input10").value;

        var detailsContent = '<div class="details-content">' + input1Value + ':' + input4Value + input5Value + input6Value + input7Value + '<a href="' + input8Value + '">' + input8Value + '</a>' + input9Value + '</div>';

        lmnDetails.innerHTML = detailsContent;
        lmnDetails.style.display = "block";
      } else {
        lmnDetails.style.display = "none";
      }
    }

    // Hide the details
    function hideDetails() {
      var lmnDetails = document.getElementById("lmnDetails");
      lmnDetails.style.display = "none";
      lmnDetailsVisible = false;
    }

    // Function to format the date as "dd Month Name, yyyy-hrhr:minmin"into input field 9
    function formatDate(date) {
      const months = [
        "January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"
      ];

      const day = date.getDate();
      const monthName = months[date.getMonth()];
      const year = date.getFullYear();
      const hours = date.getHours().toString().padStart(2, '0'); // Add leading zero if necessary
      const minutes = date.getMinutes().toString().padStart(2, '0'); // Add leading zero if necessary

      return `, Accessed on:${day} ${monthName}, ${year}-${hours}:${minutes}`;
    }

    // Function to handle the Ctrl + D + T key combination
    function handleCtrlDT(event) {
      if (event.ctrlKey && event.key === "d") {
        // Prevent the default behavior of the key combination
        event.preventDefault();

        // Generate the current date and time in the desired format
        const currentDate = new Date();
        const formattedDate = formatDate(currentDate);

        // Insert the formatted date into input 9
        document.getElementById("input9").value = formattedDate;
      }
    }

    // Add an event listener to the document for keydown events
    document.addEventListener("keydown", handleCtrlDT);

    // Toggle the visibility of ABC content
    var mainTextVisible = false; // Declare the variable

    function toggleABC() {
      var output = document.getElementById("output");
      var showButton = document.getElementById("showButton");

      mainTextVisible = !mainTextVisible;

      if (mainTextVisible) {
        var input1Value = document.getElementById("input1").value;
        var input2Value = document.getElementById("input2").value;
        var input3Value = document.getElementById("input3").value;
        var input4Value = document.getElementById("input4").value;
        var input5Value = document.getElementById("input5").value;
        var input6Value = document.getElementById("input6").value;
        var input7Value = document.getElementById("input7").value;
        var input8Value = document.getElementById("input8").value;
        var input9Value = document.getElementById("input9").value;
        var input10Value = document.getElementById("input10").value;

        output.textContent = '{input1: "' + input1Value + '", input2: "' + input2Value + '", input3: "' + input3Value + '", input4: "' + input4Value + '", input5: "' + input5Value + '", input6: "' + input6Value + '", input7: "' + input7Value + '", input8: "' + input8Value + '", input9: "' + input9Value + '", input10: "' + input10Value + '"}' + ",";
        showButton.innerHTML = "Hide ABC";
        showButton.classList.add("active"); // Add "active" class
        output.style.display = "block";
        showButton.textContent = "Hide ABC";
      } else {
        output.style.display = "none";
        showButton.textContent = "Show ABC";
        showButton.innerHTML = "Show ABC";
        showButton.classList.remove("active"); // Remove "active" class}
      }
    }

    //Using enter key etc. to enter #x003C;br&#x003E; etc. in input field
    function addLineBreak(event) {
      if (event.key === "Enter" && event.ctrlKey) {
        event.preventDefault();
        var input = event.target;
        var cursorPosition = input.selectionStart;
        var currentValue = input.value;
        var newValue =
          currentValue.substring(0, cursorPosition) +
          "&#x003C;br&#x003E;" +
          currentValue.substring(cursorPosition);
        input.value = newValue;
        input.setSelectionRange(cursorPosition + 19, cursorPosition + 19);
      }
      if (event.key === "b" && event.ctrlKey) {
        event.preventDefault();
        var input = event.target;
        var cursorPosition = input.selectionStart;
        var currentValue = input.value;
        var newValue =
          currentValue.substring(0, cursorPosition) +
          "&#x003C;b&#x003E;" +
          "&#x003C;/b&#x003E;" +
          currentValue.substring(cursorPosition);
        input.value = newValue;
        input.setSelectionRange(cursorPosition + 17, cursorPosition + 17);
      }
      if (event.key === "u" && event.ctrlKey) {
        event.preventDefault();
        var input = event.target;
        var cursorPosition = input.selectionStart;
        var currentValue = input.value;
        var newValue =
          currentValue.substring(0, cursorPosition) +
          "&#x003C;u&#x003E;" +
          "&#x003C;/u&#x003E;" +
          currentValue.substring(cursorPosition);
        input.value = newValue;
        input.setSelectionRange(cursorPosition + 17, cursorPosition + 17);
      }
      if (event.key === "q" && event.ctrlKey) {
        event.preventDefault();
        var input = event.target;
        var cursorPosition = input.selectionStart;
        var currentValue = input.value;
        var newValue =
          currentValue.substring(0, cursorPosition) +
          "&amp;quot; &amp;quot;" +
          currentValue.substring(cursorPosition);
        input.value = newValue;
        input.setSelectionRange(cursorPosition + 11, cursorPosition + 11);
      }
      if (event.key === "l" && event.ctrlKey) {
        event.preventDefault();
        var input = event.target;
        var cursorPosition = input.selectionStart;
        var currentValue = input.value;
        var newValue =
          currentValue.substring(0, cursorPosition) +
          "&#x2022;" +
          currentValue.substring(cursorPosition);
        input.value = newValue;
        input.setSelectionRange(cursorPosition + 10, cursorPosition + 10);
      }
    }
    var inputFields = document.querySelectorAll("input, textarea");
    inputFields.forEach(function (input) {
      input.addEventListener("keydown", addLineBreak);
    });

    </script>

    <!-- this script is for saving and loading the page from the very position -->
<script>
  function savePageState() {
  // Check if local storage is available
  if (typeof Storage !== "undefined") {
    // Create an object to store the page state
    var pageState = {
      inputValues: {},
      mainTextVisible: mainTextVisible,
      lmnContentVisible: lmnContentVisible,
      lmnDetailsVisible: lmnDetailsVisible,
      outputContent: document.getElementById("output").textContent,
      showAllJKLButtonActive: showAllJKLButton.classList.contains("active"),
      jklContainerContent: jklContainer.innerHTML,
      showLMNButtonActive: showLMNButton.classList.contains("active"),
      lmnOutputContent: document.getElementById("lmnOutput").innerHTML,
      lmnDetailsContent: document.getElementById("lmnDetails").innerHTML,
    };

    // Store the input field values
    var inputFields = document.querySelectorAll("input, textarea");
    inputFields.forEach(function (input) {
      pageState.inputValues[input.id] = input.value;
    });

    // Convert the object to JSON and store it in local storage
    localStorage.setItem("pageState", JSON.stringify(pageState));

    alert("Page state saved successfully!");
  } else {
    alert(
      "Local storage is not available. Your browser may be in private mode or have local storage disabled. " +
        "This feature requires local storage to work properly."
    );
  }
}

function loadPageState() {
  // Check if local storage is available
  if (typeof Storage !== "undefined") {
    // Retrieve the saved page state from local storage
    var savedState = localStorage.getItem("pageState");

    if (savedState) {
      // Parse the JSON and restore the state
      var pageState = JSON.parse(savedState);

      // Restore input field values
      for (var inputId in pageState.inputValues) {
        var inputValue = pageState.inputValues[inputId];
        document.getElementById(inputId).value = inputValue;
      }

      // Restore visibility states
      mainTextVisible = pageState.mainTextVisible;
      lmnContentVisible = pageState.lmnContentVisible;
      lmnDetailsVisible = pageState.lmnDetailsVisible;

      // Toggle visibility based on restored states
      if (mainTextVisible) {
        toggleABC();
      }

      if (lmnContentVisible) {
        toggleLMN();
      }

      if (lmnDetailsVisible) {
        toggleDetails();
      }

      // Restore output content and button states
      document.getElementById("output").textContent = pageState.outputContent;
      if (pageState.showAllJKLButtonActive) {
        toggleAllJKL();
      }
      jklContainer.innerHTML = pageState.jklContainerContent;
      if (pageState.showLMNButtonActive) {
        toggleLMN();
      }
      document.getElementById("lmnOutput").innerHTML = pageState.lmnOutputContent;
      document.getElementById("lmnDetails").innerHTML = pageState.lmnDetailsContent;

      alert("Page state loaded successfully!");
    } else {
      alert("No saved state found.");
    }
  } else {
    alert(
      "Local storage is not available. Your browser may be in private mode or have local storage disabled. " +
        "This feature requires local storage to work properly."
    );
  }
}

</script>
<!-- script for preventing scroll to top on click of hyperlink -->
<script>
function toggleJKLDetails(event, index) {
  event.preventDefault(); // Prevent the default anchor behavior
  var detailsDiv = document.getElementById('jklDetails_' + index);

  if (detailsDiv.style.display === 'none') {
    detailsDiv.style.display = 'block';
  } else {
    detailsDiv.style.display = 'none';
  }
}



</script>
</body>

</html>
